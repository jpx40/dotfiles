(()=>{var e,t,r={8257:(e,t,r)=>{var n=r(9212),a=r(5637),s=TypeError;e.exports=function(e){if(n(e))return e;throw s(a(e)+" is not a function")}},9882:(e,t,r)=>{var n=r(9212),a=String,s=TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw s("Can't set "+a(e)+" as a prototype")}},2569:(e,t,r)=>{var n=r(794),a=String,s=TypeError;e.exports=function(e){if(n(e))return e;throw s(a(e)+" is not an object")}},5766:(e,t,r)=>{var n=r(2977),a=r(6782),s=r(1825),i=function(e){return function(t,r,i){var o,c=n(t),u=s(c),l=a(i,u);if(e&&r!=r){for(;u>l;)if((o=c[l++])!=o)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:i(!0),indexOf:i(!1)}},8173:(e,t,r)=>{"use strict";var n=r(8494),a=r(4521),s=TypeError,i=Object.getOwnPropertyDescriptor,o=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=o?function(e,t){if(a(e)&&!i(e,"length").writable)throw s("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},9624:(e,t,r)=>{var n=r(7386),a=n({}.toString),s=n("".slice);e.exports=function(e){return s(a(e),8,-1)}},3058:(e,t,r)=>{var n=r(8191),a=r(9212),s=r(9624),i=r(3649)("toStringTag"),o=Object,c="Arguments"==s(function(){return arguments}());e.exports=n?s:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=o(e),i))?r:c?s(t):"Object"==(n=s(t))&&a(t.callee)?"Arguments":n}},3478:(e,t,r)=>{var n=r(2870),a=r(929),s=r(6683),i=r(4615);e.exports=function(e,t,r){for(var o=a(t),c=i.f,u=s.f,l=0;l<o.length;l++){var g=o[l];n(e,g)||r&&n(r,g)||c(e,g,u(t,g))}}},57:(e,t,r)=>{var n=r(8494),a=r(4615),s=r(4677);e.exports=n?function(e,t,r){return a.f(e,t,s(1,r))}:function(e,t,r){return e[t]=r,e}},4677:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},2499:(e,t,r)=>{var n=r(9594),a=r(4615);e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),a.f(e,t,r)}},3746:(e,t,r)=>{var n=r(9212),a=r(4615),s=r(9594),i=r(2296);e.exports=function(e,t,r,o){o||(o={});var c=o.enumerable,u=void 0!==o.name?o.name:t;if(n(r)&&s(r,u,o),o.global)c?e[t]=r:i(t,r);else{try{o.unsafe?e[t]&&(c=!0):delete e[t]}catch(e){}c?e[t]=r:a.f(e,t,{value:r,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return e}},2296:(e,t,r)=>{var n=r(7583),a=Object.defineProperty;e.exports=function(e,t){try{a(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},8494:(e,t,r)=>{var n=r(6544);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},2952:e=>{var t="object"==typeof document&&document.all,r=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:r}},6668:(e,t,r)=>{var n=r(7583),a=r(794),s=n.document,i=a(s)&&a(s.createElement);e.exports=function(e){return i?s.createElement(e):{}}},6768:e=>{var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},6918:e=>{e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},4061:(e,t,r)=>{var n,a,s=r(7583),i=r(6918),o=s.process,c=s.Deno,u=o&&o.versions||c&&c.version,l=u&&u.v8;l&&(a=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!a&&i&&(!(n=i.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=i.match(/Chrome\/(\d+)/))&&(a=+n[1]),e.exports=a},5690:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},668:(e,t,r)=>{var n=r(7386),a=Error,s=n("".replace),i=String(a("zxcasd").stack),o=/\n\s*at [^:]*:[^\n]*/,c=o.test(i);e.exports=function(e,t){if(c&&"string"==typeof e&&!a.prepareStackTrace)for(;t--;)e=s(e,o,"");return e}},9719:(e,t,r)=>{var n=r(57),a=r(668),s=r(1178),i=Error.captureStackTrace;e.exports=function(e,t,r,o){s&&(i?i(e,t):n(e,"stack",a(r,o)))}},1178:(e,t,r)=>{var n=r(6544),a=r(4677);e.exports=!n((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",a(1,7)),7!==e.stack)}))},7263:(e,t,r)=>{var n=r(7583),a=r(6683).f,s=r(57),i=r(3746),o=r(2296),c=r(3478),u=r(4451);e.exports=function(e,t){var r,l,g,d,f,m=e.target,p=e.global,h=e.stat;if(r=p?n:h?n[m]||o(m,{}):(n[m]||{}).prototype)for(l in t){if(d=t[l],g=e.dontCallGetSet?(f=a(r,l))&&f.value:r[l],!u(p?l:m+(h?".":"#")+l,e.forced)&&void 0!==g){if(typeof d==typeof g)continue;c(d,g)}(e.sham||g&&g.sham)&&s(d,"sham",!0),i(r,l,d,e)}}},6544:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},1611:(e,t,r)=>{var n=r(8987),a=Function.prototype,s=a.apply,i=a.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?i.bind(s):function(){return i.apply(s,arguments)})},8987:(e,t,r)=>{var n=r(6544);e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},8262:(e,t,r)=>{var n=r(8987),a=Function.prototype.call;e.exports=n?a.bind(a):function(){return a.apply(a,arguments)}},4340:(e,t,r)=>{var n=r(8494),a=r(2870),s=Function.prototype,i=n&&Object.getOwnPropertyDescriptor,o=a(s,"name"),c=o&&"something"===function(){}.name,u=o&&(!n||n&&i(s,"name").configurable);e.exports={EXISTS:o,PROPER:c,CONFIGURABLE:u}},4523:(e,t,r)=>{var n=r(7386),a=r(8257);e.exports=function(e,t,r){try{return n(a(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}},7386:(e,t,r)=>{var n=r(8987),a=Function.prototype,s=a.call,i=n&&a.bind.bind(s,s);e.exports=n?i:function(e){return function(){return s.apply(e,arguments)}}},5897:(e,t,r)=>{var n=r(7583),a=r(9212);e.exports=function(e,t){return arguments.length<2?(r=n[e],a(r)?r:void 0):n[e]&&n[e][t];var r}},911:(e,t,r)=>{var n=r(8257),a=r(8505);e.exports=function(e,t){var r=e[t];return a(r)?void 0:n(r)}},7583:function(e,t,r){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||this||Function("return this")()},2870:(e,t,r)=>{var n=r(7386),a=r(1324),s=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return s(a(e),t)}},4639:e=>{e.exports={}},275:(e,t,r)=>{var n=r(8494),a=r(6544),s=r(6668);e.exports=!n&&!a((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},5044:(e,t,r)=>{var n=r(7386),a=r(6544),s=r(9624),i=Object,o=n("".split);e.exports=a((function(){return!i("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?o(e,""):i(e)}:i},434:(e,t,r)=>{var n=r(9212),a=r(794),s=r(7496);e.exports=function(e,t,r){var i,o;return s&&n(i=t.constructor)&&i!==r&&a(o=i.prototype)&&o!==r.prototype&&s(e,o),e}},9734:(e,t,r)=>{var n=r(7386),a=r(9212),s=r(1314),i=n(Function.toString);a(s.inspectSource)||(s.inspectSource=function(e){return i(e)}),e.exports=s.inspectSource},4402:(e,t,r)=>{var n=r(794),a=r(57);e.exports=function(e,t){n(t)&&"cause"in t&&a(e,"cause",t.cause)}},2743:(e,t,r)=>{var n,a,s,i=r(5307),o=r(7583),c=r(794),u=r(57),l=r(2870),g=r(1314),d=r(9137),f=r(4639),m="Object already initialized",p=o.TypeError,h=o.WeakMap;if(i||g.state){var v=g.state||(g.state=new h);v.get=v.get,v.has=v.has,v.set=v.set,n=function(e,t){if(v.has(e))throw p(m);return t.facade=e,v.set(e,t),t},a=function(e){return v.get(e)||{}},s=function(e){return v.has(e)}}else{var y=d("state");f[y]=!0,n=function(e,t){if(l(e,y))throw p(m);return t.facade=e,u(e,y,t),t},a=function(e){return l(e,y)?e[y]:{}},s=function(e){return l(e,y)}}e.exports={set:n,get:a,has:s,enforce:function(e){return s(e)?a(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=a(t)).type!==e)throw p("Incompatible receiver, "+e+" required");return r}}}},4521:(e,t,r)=>{var n=r(9624);e.exports=Array.isArray||function(e){return"Array"==n(e)}},9212:(e,t,r)=>{var n=r(2952),a=n.all;e.exports=n.IS_HTMLDDA?function(e){return"function"==typeof e||e===a}:function(e){return"function"==typeof e}},4451:(e,t,r)=>{var n=r(6544),a=r(9212),s=/#|\.prototype\./,i=function(e,t){var r=c[o(e)];return r==l||r!=u&&(a(t)?n(t):!!t)},o=i.normalize=function(e){return String(e).replace(s,".").toLowerCase()},c=i.data={},u=i.NATIVE="N",l=i.POLYFILL="P";e.exports=i},8505:e=>{e.exports=function(e){return null==e}},794:(e,t,r)=>{var n=r(9212),a=r(2952),s=a.all;e.exports=a.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:n(e)||e===s}:function(e){return"object"==typeof e?null!==e:n(e)}},6268:e=>{e.exports=!1},5871:(e,t,r)=>{var n=r(5897),a=r(9212),s=r(2447),i=r(7786),o=Object;e.exports=i?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return a(t)&&s(t.prototype,o(e))}},1825:(e,t,r)=>{var n=r(97);e.exports=function(e){return n(e.length)}},9594:(e,t,r)=>{var n=r(7386),a=r(6544),s=r(9212),i=r(2870),o=r(8494),c=r(4340).CONFIGURABLE,u=r(9734),l=r(2743),g=l.enforce,d=l.get,f=String,m=Object.defineProperty,p=n("".slice),h=n("".replace),v=n([].join),y=o&&!a((function(){return 8!==m((function(){}),"length",{value:8}).length})),b=String(String).split("String"),w=e.exports=function(e,t,r){"Symbol("===p(f(t),0,7)&&(t="["+h(f(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!i(e,"name")||c&&e.name!==t)&&(o?m(e,"name",{value:t,configurable:!0}):e.name=t),y&&r&&i(r,"arity")&&e.length!==r.arity&&m(e,"length",{value:r.arity});try{r&&i(r,"constructor")&&r.constructor?o&&m(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=g(e);return i(n,"source")||(n.source=v(b,"string"==typeof t?t:"")),e};Function.prototype.toString=w((function(){return s(this)&&d(this).source||u(this)}),"toString")},9021:e=>{var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}},2764:(e,t,r)=>{var n=r(8320);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:n(e)}},4615:(e,t,r)=>{var n=r(8494),a=r(275),s=r(7670),i=r(2569),o=r(8734),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,g="enumerable",d="configurable",f="writable";t.f=n?s?function(e,t,r){if(i(e),t=o(t),i(r),"function"==typeof e&&"prototype"===t&&"value"in r&&f in r&&!r[f]){var n=l(e,t);n&&n[f]&&(e[t]=r.value,r={configurable:d in r?r[d]:n[d],enumerable:g in r?r[g]:n[g],writable:!1})}return u(e,t,r)}:u:function(e,t,r){if(i(e),t=o(t),i(r),a)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw c("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},6683:(e,t,r)=>{var n=r(8494),a=r(8262),s=r(112),i=r(4677),o=r(2977),c=r(8734),u=r(2870),l=r(275),g=Object.getOwnPropertyDescriptor;t.f=n?g:function(e,t){if(e=o(e),t=c(t),l)try{return g(e,t)}catch(e){}if(u(e,t))return i(!a(s.f,e,t),e[t])}},9275:(e,t,r)=>{var n=r(8356),a=r(5690).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,a)}},4012:(e,t)=>{t.f=Object.getOwnPropertySymbols},2447:(e,t,r)=>{var n=r(7386);e.exports=n({}.isPrototypeOf)},8356:(e,t,r)=>{var n=r(7386),a=r(2870),s=r(2977),i=r(5766).indexOf,o=r(4639),c=n([].push);e.exports=function(e,t){var r,n=s(e),u=0,l=[];for(r in n)!a(o,r)&&a(n,r)&&c(l,r);for(;t.length>u;)a(n,r=t[u++])&&(~i(l,r)||c(l,r));return l}},112:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,a=n&&!r.call({1:2},1);t.f=a?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},7496:(e,t,r)=>{var n=r(4523),a=r(2569),s=r(9882);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=n(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return a(r),s(n),t?e(r,n):r.__proto__=n,r}}():void 0)},6252:(e,t,r)=>{var n=r(8262),a=r(9212),s=r(794),i=TypeError;e.exports=function(e,t){var r,o;if("string"===t&&a(r=e.toString)&&!s(o=n(r,e)))return o;if(a(r=e.valueOf)&&!s(o=n(r,e)))return o;if("string"!==t&&a(r=e.toString)&&!s(o=n(r,e)))return o;throw i("Can't convert object to primitive value")}},929:(e,t,r)=>{var n=r(5897),a=r(7386),s=r(9275),i=r(4012),o=r(2569),c=a([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=s.f(o(e)),r=i.f;return r?c(t,r(e)):t}},5327:(e,t,r)=>{var n=r(4615).f;e.exports=function(e,t,r){r in e||n(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})}},3955:(e,t,r)=>{var n=r(8505),a=TypeError;e.exports=function(e){if(n(e))throw a("Can't call method on "+e);return e}},9137:(e,t,r)=>{var n=r(7836),a=r(8284),s=n("keys");e.exports=function(e){return s[e]||(s[e]=a(e))}},1314:(e,t,r)=>{var n=r(7583),a=r(2296),s="__core-js_shared__",i=n[s]||a(s,{});e.exports=i},7836:(e,t,r)=>{var n=r(6268),a=r(1314);(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.31.0",mode:n?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.0/LICENSE",source:"https://github.com/zloirock/core-js"})},4193:(e,t,r)=>{var n=r(4061),a=r(6544),s=r(7583).String;e.exports=!!Object.getOwnPropertySymbols&&!a((function(){var e=Symbol();return!s(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},6782:(e,t,r)=>{var n=r(7486),a=Math.max,s=Math.min;e.exports=function(e,t){var r=n(e);return r<0?a(r+t,0):s(r,t)}},2977:(e,t,r)=>{var n=r(5044),a=r(3955);e.exports=function(e){return n(a(e))}},7486:(e,t,r)=>{var n=r(9021);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},97:(e,t,r)=>{var n=r(7486),a=Math.min;e.exports=function(e){return e>0?a(n(e),9007199254740991):0}},1324:(e,t,r)=>{var n=r(3955),a=Object;e.exports=function(e){return a(n(e))}},2670:(e,t,r)=>{var n=r(8262),a=r(794),s=r(5871),i=r(911),o=r(6252),c=r(3649),u=TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!a(e)||s(e))return e;var r,c=i(e,l);if(c){if(void 0===t&&(t="default"),r=n(c,e,t),!a(r)||s(r))return r;throw u("Can't convert object to primitive value")}return void 0===t&&(t="number"),o(e,t)}},8734:(e,t,r)=>{var n=r(2670),a=r(5871);e.exports=function(e){var t=n(e,"string");return a(t)?t:t+""}},8191:(e,t,r)=>{var n={};n[r(3649)("toStringTag")]="z",e.exports="[object z]"===String(n)},8320:(e,t,r)=>{var n=r(3058),a=String;e.exports=function(e){if("Symbol"===n(e))throw TypeError("Cannot convert a Symbol value to a string");return a(e)}},5637:e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},8284:(e,t,r)=>{var n=r(7386),a=0,s=Math.random(),i=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+i(++a+s,36)}},7786:(e,t,r)=>{var n=r(4193);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},7670:(e,t,r)=>{var n=r(8494),a=r(6544);e.exports=n&&a((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},5307:(e,t,r)=>{var n=r(7583),a=r(9212),s=n.WeakMap;e.exports=a(s)&&/native code/.test(String(s))},3649:(e,t,r)=>{var n=r(7583),a=r(7836),s=r(2870),i=r(8284),o=r(4193),c=r(7786),u=n.Symbol,l=a("wks"),g=c?u.for||u:u&&u.withoutSetter||i;e.exports=function(e){return s(l,e)||(l[e]=o&&s(u,e)?u[e]:g("Symbol."+e)),l[e]}},7442:(e,t,r)=>{"use strict";var n=r(5897),a=r(2870),s=r(57),i=r(2447),o=r(7496),c=r(3478),u=r(5327),l=r(434),g=r(2764),d=r(4402),f=r(9719),m=r(8494),p=r(6268);e.exports=function(e,t,r,h){var v="stackTraceLimit",y=h?2:1,b=e.split("."),w=b[b.length-1],A=n.apply(null,b);if(A){var x=A.prototype;if(!p&&a(x,"cause")&&delete x.cause,!r)return A;var T=n("Error"),I=t((function(e,t){var r=g(h?t:e,void 0),n=h?new A(e):new A;return void 0!==r&&s(n,"message",r),f(n,I,n.stack,2),this&&i(x,this)&&l(n,this,I),arguments.length>y&&d(n,arguments[y]),n}));if(I.prototype=x,"Error"!==w?o?o(I,T):c(I,T,{name:!0}):m&&v in A&&(u(I,A,v),u(I,A,"prepareStackTrace")),c(I,A),!p)try{x.name!==w&&s(x,"name",w),x.constructor=I}catch(e){}return I}}},4573:(e,t,r)=>{"use strict";var n=r(7263),a=r(1324),s=r(1825),i=r(8173),o=r(6768);n({target:"Array",proto:!0,arity:1,forced:r(6544)((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}()},{push:function(e){var t=a(this),r=s(t),n=arguments.length;o(r+n);for(var c=0;c<n;c++)t[r]=arguments[c],r++;return i(t,r),r}})},8487:(e,t,r)=>{var n=r(7263),a=r(7583),s=r(1611),i=r(7442),o="WebAssembly",c=a[o],u=7!==Error("e",{cause:7}).cause,l=function(e,t){var r={};r[e]=i(e,t,u),n({global:!0,constructor:!0,arity:1,forced:u},r)},g=function(e,t){if(c&&c[e]){var r={};r[e]=i(o+"."+e,t,u),n({target:o,stat:!0,constructor:!0,arity:1,forced:u},r)}};l("Error",(function(e){return function(t){return s(e,this,arguments)}})),l("EvalError",(function(e){return function(t){return s(e,this,arguments)}})),l("RangeError",(function(e){return function(t){return s(e,this,arguments)}})),l("ReferenceError",(function(e){return function(t){return s(e,this,arguments)}})),l("SyntaxError",(function(e){return function(t){return s(e,this,arguments)}})),l("TypeError",(function(e){return function(t){return s(e,this,arguments)}})),l("URIError",(function(e){return function(t){return s(e,this,arguments)}})),g("CompileError",(function(e){return function(t){return s(e,this,arguments)}})),g("LinkError",(function(e){return function(t){return s(e,this,arguments)}})),g("RuntimeError",(function(e){return function(t){return s(e,this,arguments)}}))},5601:(e,t,r)=>{"use strict";var n=r(8494),a=r(7386),s=r(2499),i=URLSearchParams.prototype,o=a(i.forEach);n&&!("size"in i)&&s(i,"size",{get:function(){var e=0;return o(this,(function(){e++})),e},configurable:!0,enumerable:!0})},1075:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new a(n,s||e,i),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],o]:e._events[c].push(o):(e._events[c]=o,e._eventsCount++),e}function i(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,a=[];if(0===this._eventsCount)return a;for(n in e=this._events)t.call(e,n)&&a.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var a=0,s=n.length,i=new Array(s);a<s;a++)i[a]=n[a].fn;return i},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,a,s,i){var o=r?r+e:e;if(!this._events[o])return!1;var c,u,l=this._events[o],g=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),g){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,a),!0;case 5:return l.fn.call(l.context,t,n,a,s),!0;case 6:return l.fn.call(l.context,t,n,a,s,i),!0}for(u=1,c=new Array(g-1);u<g;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var d,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),g){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;case 4:l[u].fn.call(l[u].context,t,n,a);break;default:if(!c)for(d=1,c=new Array(g-1);d<g;d++)c[d-1]=arguments[d];l[u].fn.apply(l[u].context,c)}}return!0},o.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,a){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return i(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||a&&!o.once||n&&o.context!==n||i(this,s);else{for(var c=0,u=[],l=o.length;c<l;c++)(o[c].fn!==t||a&&!o[c].once||n&&o[c].context!==n)&&u.push(o[c]);u.length?this._events[s]=1===u.length?u[0]:u:i(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&i(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o},3070:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)}},8794:(e,t,r)=>{"use strict";let n;r.d(t,{Z:()=>s});const a=new Uint8Array(16);function s(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(a)}},7376:(e,t,r)=>{"use strict";r.d(t,{S:()=>a});const n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));function a(e,t=0){return(n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]).toLowerCase()}},651:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(3070),a=r(8794),s=r(7376);const i=function(e,t,r){if(n.Z.randomUUID&&!t&&!e)return n.Z.randomUUID();const i=(e=e||{}).random||(e.rng||a.Z)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=i[e];return t}return(0,s.S)(i)}},3145:function(e,t){var r,n;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,r=function(e){"use strict";if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const t="The message port closed before a response was received.",r=e=>{const r={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(r).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class n extends WeakMap{constructor(e,t=void 0){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const a=(t,r)=>(...n)=>{e.runtime.lastError?t.reject(new Error(e.runtime.lastError.message)):r.singleCallbackArg||n.length<=1&&!1!==r.singleCallbackArg?t.resolve(n[0]):t.resolve(n)},s=e=>1==e?"argument":"arguments",i=(e,t,r)=>new Proxy(t,{apply:(t,n,a)=>r.call(n,e,...a)});let o=Function.call.bind(Object.prototype.hasOwnProperty);const c=(e,t={},r={})=>{let n=Object.create(null),u={has:(t,r)=>r in e||r in n,get(u,l,g){if(l in n)return n[l];if(!(l in e))return;let d=e[l];if("function"==typeof d)if("function"==typeof t[l])d=i(e,e[l],t[l]);else if(o(r,l)){let t=((e,t)=>function(r,...n){if(n.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${s(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${s(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((s,i)=>{if(t.fallbackToNoCallback)try{r[e](...n,a({resolve:s,reject:i},t))}catch(a){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,a),r[e](...n),t.fallbackToNoCallback=!1,t.noCallback=!0,s()}else t.noCallback?(r[e](...n),s()):r[e](...n,a({resolve:s,reject:i},t))}))})(l,r[l]);d=i(e,e[l],t)}else d=d.bind(e);else if("object"==typeof d&&null!==d&&(o(t,l)||o(r,l)))d=c(d,t[l],r[l]);else{if(!o(r,"*"))return Object.defineProperty(n,l,{configurable:!0,enumerable:!0,get:()=>e[l],set(t){e[l]=t}}),d;d=c(d,t[l],r["*"])}return n[l]=d,d},set:(t,r,a,s)=>(r in n?n[r]=a:e[r]=a,!0),defineProperty:(e,t,r)=>Reflect.defineProperty(n,t,r),deleteProperty:(e,t)=>Reflect.deleteProperty(n,t)},l=Object.create(e);return new Proxy(l,u)},u=e=>({addListener(t,r,...n){t.addListener(e.get(r),...n)},hasListener:(t,r)=>t.hasListener(e.get(r)),removeListener(t,r){t.removeListener(e.get(r))}}),l=new n((e=>"function"!=typeof e?e:function(t){const r=c(t,{},{getContent:{minArgs:0,maxArgs:0}});e(r)})),g=new n((e=>"function"!=typeof e?e:function(t,r,n){let a,s,i=!1,o=new Promise((e=>{a=function(t){i=!0,e(t)}}));try{s=e(t,r,a)}catch(e){s=Promise.reject(e)}const c=!0!==s&&((u=s)&&"object"==typeof u&&"function"==typeof u.then);var u;if(!0!==s&&!c&&!i)return!1;return(c?s:o).then((e=>{n(e)}),(e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",n({__mozWebExtensionPolyfillReject__:!0,message:t})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)})),!0})),d=({reject:r,resolve:n},a)=>{e.runtime.lastError?e.runtime.lastError.message===t?n():r(new Error(e.runtime.lastError.message)):a&&a.__mozWebExtensionPolyfillReject__?r(new Error(a.message)):n(a)},f=(e,t,r,...n)=>{if(n.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${s(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${s(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((e,t)=>{const a=d.bind(null,{resolve:e,reject:t});n.push(a),r.sendMessage(...n)}))},m={devtools:{network:{onRequestFinished:u(l)}},runtime:{onMessage:u(g),onMessageExternal:u(g),sendMessage:f.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:f.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},p={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return r.privacy={network:{"*":p},services:{"*":p},websites:{"*":p}},c(e,m,r)};e.exports=r(chrome)}else e.exports=globalThis.browser},void 0===(n=r.apply(t,[e]))||(e.exports=n)},882:(e,t,r)=>{"use strict";r.r(t),r.d(t,{message:()=>a,revision:()=>s,upgrade:()=>i});var n=r(3145);const a="Support event pages",s="20211228050445_support_event_pages";async function i(){const e={},{engines:t,disabledEngines:r,searchCount:a}=await n.storage.local.get(["engines","disabledEngines","searchCount"]),i=["sogou","naver","exalead","webcite"];return e.engines=t.filter((function(e){return!i.includes(e)})),e.disabledEngines=r.filter((function(e){return!i.includes(e)})),e.taskRegistry={lastTaskStart:0,tabs:{},tasks:{}},e.storageRegistry={},e.lastStorageCleanup=0,e.lastEngineAccessCheck=0,e.setContextMenuEvent=0,e.searchModeContextMenu="tab",e.searchModeAction="tab",e.useCount=a,await n.storage.local.remove(["searchCount","openNewTab"]),e.storageVersion=s,n.storage.local.set(e)}},2799:(e,t,r)=>{"use strict";r.r(t),r.d(t,{message:()=>a,revision:()=>s,upgrade:()=>i});var n=r(3145);const a="Add showEngineIcons",s="20220102035029_add_showengineicons";async function i(){const e={showEngineIcons:!0};return e.storageVersion=s,n.storage.local.set(e)}},180:(e,t,r)=>{"use strict";r.r(t),r.d(t,{message:()=>a,revision:()=>s,upgrade:()=>i}),r(4573);var n=r(3145);const a="Add search engines",s="20220102051642_add_search_engines";async function i(){const e={},{engines:t,disabledEngines:r}=await n.storage.local.get(["engines","disabledEngines"]),a=["baidu","qihoo"];return e.engines=t.filter((function(e){return!a.includes(e)})),e.disabledEngines=r.filter((function(e){return!a.includes(e)})),e.engines=e.engines.concat(["baidu","yahoo","qihoo","mailru"]),e.disabledEngines.push("mailru"),e.storageVersion=s,n.storage.local.set(e)}},5863:(e,t,r)=>{"use strict";r.r(t),r.d(t,{message:()=>a,revision:()=>s,upgrade:()=>i});var n=r(3145);const a="Add openCurrentDoc",s="20220114113759_add_opencurrentdoc";async function i(){const e={openCurrentDocAction:!0,openCurrentDocContextMenu:!0};return e.storageVersion=s,n.storage.local.set(e)}},8267:(e,t,r)=>{"use strict";r.r(t),r.d(t,{message:()=>s,revision:()=>i,upgrade:()=>o});var n=r(2667),a=r(3145);const s="Add theme support",i="20221220055629_add_theme_support";async function o(){const e={appTheme:"auto",showContribPage:!0,contribPageLastAutoOpen:0,pinActionToolbarOpenCurrentDoc:!0,pinActionToolbarOptions:!1,pinActionToolbarContribute:!0},{installTime:t}=await a.storage.local.get("installTime");return e.installTime=(0,n.Og)(t),e.storageVersion=i,a.storage.local.set(e)}},377:(e,t,r)=>{"use strict";r.r(t),r.d(t,{message:()=>a,revision:()=>s,upgrade:()=>i});var n=r(3145);const a="Remove search engines",s="20230201232239_remove_search_engines";async function i(){const e={},{engines:t,disabledEngines:r}=await n.storage.local.get(["engines","disabledEngines"]),a=["baidu","qihoo","yahooJp","mailru"],i=["gigablast","megalodon"];return e.engines=t.filter((function(e){return!a.includes(e)})),e.disabledEngines=r.filter((function(e){return!a.includes(e)&&!i.includes(e)})),e.storageVersion=s,n.storage.local.set(e)}},9362:(e,t,r)=>{"use strict";r.r(t),r.d(t,{message:()=>a,revision:()=>s,upgrade:()=>i});var n=r(3145);const a="Remove Gigablast",s="20230703074609_remove_gigablast";async function i(){const e={},{engines:t,disabledEngines:r}=await n.storage.local.get(["engines","disabledEngines"]),a=["gigablast"];return e.engines=t.filter((function(e){return!a.includes(e)})),e.disabledEngines=r.filter((function(e){return!a.includes(e)})),e.storageVersion=s,n.storage.local.set(e)}},7393:(e,t,r)=>{"use strict";r.r(t),r.d(t,{message:()=>a,revision:()=>s,upgrade:()=>i});var n=r(3145);const a="Remove openCurrentDocAction",s="20230704125533_remove_opencurrentdocaction";async function i(){const e={};return await n.storage.local.remove("openCurrentDocAction"),e.storageVersion=s,n.storage.local.set(e)}},2055:(e,t,r)=>{"use strict";r.r(t),r.d(t,{message:()=>a,revision:()=>s,upgrade:()=>i});var n=r(3145);const a="Add Perma.cc",s="20230713165504_add_perma.cc";async function i(){const e={},{engines:t}=await n.storage.local.get("engines");return t.splice(t.indexOf("megalodon"),0,"permacc"),e.engines=t,e.storageVersion=s,n.storage.local.set(e)}},6532:(e,t,r)=>{"use strict";r.r(t),r.d(t,{message:()=>a,revision:()=>s,upgrade:()=>i});var n=r(3145);const a="Add Ghostarchive",s="20230715152710_add_ghostarchive";async function i(){const e={},{engines:t,disabledEngines:r}=await n.storage.local.get(["engines","disabledEngines"]),a=["ghostarchive"];return e.engines=t.concat(a),e.disabledEngines=r.concat(a),e.storageVersion=s,n.storage.local.set(e)}},5846:(e,t,r)=>{"use strict";r.r(t),r.d(t,{message:()=>a,revision:()=>s,upgrade:()=>i});var n=r(3145);const a="Initial version",s="SJltHx2rW";async function i(){const e={engines:["archiveOrg","google","googleText","bing","yandex","archiveIs","memento","webcite","exalead","gigablast","sogou","qihoo","baidu","naver","yahooJp","megalodon"],disabledEngines:["googleText","memento","webcite","exalead","gigablast","qihoo","baidu","naver","yahooJp","megalodon"],showInContextMenu:"link",searchAllEnginesContextMenu:"sub",searchAllEnginesAction:"sub",showPageAction:!0,openNewTab:!0,tabInBackgound:!1};return e.storageVersion=s,n.storage.local.set(e)}},3075:(e,t,r)=>{"use strict";r.r(t),r.d(t,{message:()=>a,revision:()=>s,upgrade:()=>i});var n=r(3145);const a="Add installTime, searchCount and contribPageLastOpen",s="SkhmnNhMG";async function i(){const e={};return e.installTime=(new Date).getTime(),e.searchCount=0,e.contribPageLastOpen=0,e.storageVersion=s,n.storage.local.set(e)}},3985:(e,t,r)=>{"use strict";r.r(t),r.d(t,{message:()=>a,revision:()=>s,upgrade:()=>i});var n=r(3145);const a="Set showPageAction to false",s="rJXbW1ZHmM";async function i(){const e={showPageAction:!1};return e.storageVersion=s,n.storage.local.set(e)}},3183:(e,t,r)=>{"use strict";r.r(t),r.d(t,{message:()=>a,revision:()=>s,upgrade:()=>i});var n=r(3145);const a="Add archiveOrgAll and archiveIsAll",s="yjRtkzy";async function i(){const e={},{engines:t,disabledEngines:r}=await n.storage.local.get(["engines","disabledEngines"]);return t.splice(t.indexOf("archiveOrg")+1,0,"archiveOrgAll"),t.splice(t.indexOf("archiveIs")+1,0,"archiveIsAll"),e.engines=t,e.disabledEngines=r.concat(["archiveOrgAll","archiveIsAll"]),e.storageVersion=s,n.storage.local.set(e)}},2667:(e,t,r)=>{"use strict";r.d(t,{Dt:()=>p,F$:()=>d,Og:()=>y,Q:()=>i,Qr:()=>g,Xf:()=>m,Yw:()=>l,ZW:()=>u,_9:()=>b,fr:()=>f,nE:()=>o,tq:()=>h,yt:()=>v}),r(8487);var n=r(651),a=r(5221),s=r(3145);function i(e,t){return s.i18n.getMessage(e,t)}function o(){s.runtime.lastError&&console.log(`Error: ${s.runtime.lastError}`)}function c(e){return new Promise((t=>setTimeout(t,e)))}async function u({url:e="",token:t="",index:r=null,active:n=!0,openerTabId:i=null,getTab:o=!1}={}){e||(e=l(t));const u={url:e,active:n};null!==r&&(u.index=r),null!==i&&(u.openerTabId=i);let g=await s.tabs.create(u);if(o){if("samsung"===a.W9){let t=1;for(;t<=500&&(!g||g.url!==e);)[g]=await s.tabs.query({lastFocusedWindow:!0,url:e}),await c(20),t+=1}return g}}function l(e){return e||(e=(0,n.Z)()),`${s.runtime.getURL("/src/tab/index.html")}?id=${e}`}function g(e,t,r=0,n="document_start"){return s.tabs.executeScript(t,{frameId:r,runAt:n,code:e})}function d(e,t,r=0,n="document_start"){return s.tabs.executeScript(t,{frameId:r,runAt:n,file:e})}async function f(){const[e]=await s.tabs.query({lastFocusedWindow:!0,active:!0});return e}async function m({fallback:e=!0}={}){let t,r;if("samsung"===a.W9)t="android",r="";else try{({os:t,arch:r}=await s.runtime.getPlatformInfo())}catch(n){if(!e)throw n;({os:t,arch:r}=await s.runtime.sendMessage({id:"getPlatform"}))}"win"===t?t="windows":"mac"===t&&(t="macos"),"MacIntel"!==navigator.platform||"ios"!==t&&void 0===navigator.standalone||(t="ipados"),"x86-32"===r?r="386":"x86-64"===r?r="amd64":r.startsWith("arm")&&(r="arm");const n="windows"===t,i="macos"===t,o="linux"===t,c="android"===t,u="ios"===t,l="ipados"===t,g=["android","ios","ipados"].includes(t),d="chrome"===a.W9,f="edge"===a.W9,m="firefox"===a.W9,p=["chrome","opera"].includes(a.W9)&&/ opr\//i.test(navigator.userAgent),h="safari"===a.W9,v="samsung"===a.W9;return{os:t,arch:r,targetEnv:a.W9,isWindows:n,isMacos:i,isLinux:o,isAndroid:c,isIos:u,isIpados:l,isMobile:g,isChrome:d,isEdge:f,isFirefox:m,isOpera:p,isSafari:h,isSamsung:v}}async function p(){const{os:e}=await m();return"android"===e}async function h(){const{os:e}=await m();return["android","ios","ipados"].includes(e)}function v(){return window.matchMedia("(prefers-color-scheme: dark)")}function y(e){return e||(e=Date.now()),e-e%864e5}function b(e){if(e&&e.id!==s.tabs.TAB_ID_NONE)return!0}},5221:(e,t,r)=>{"use strict";r.d(t,{W9:()=>n,n_:()=>s,pL:()=>a});const n="chrome",a=!0,s={local:"20230715152710_add_ghostarchive"}},36:(e,t,r)=>{var n={"./local/20211228050445_support_event_pages.js":882,"./local/20220102035029_add_showengineicons.js":2799,"./local/20220102051642_add_search_engines.js":180,"./local/20220114113759_add_opencurrentdoc.js":5863,"./local/20221220055629_add_theme_support.js":8267,"./local/20230201232239_remove_search_engines.js":377,"./local/20230703074609_remove_gigablast.js":9362,"./local/20230704125533_remove_opencurrentdocaction.js":7393,"./local/20230713165504_add_perma.cc.js":2055,"./local/20230715152710_add_ghostarchive.js":6532,"./local/SJltHx2rW.js":5846,"./local/SkhmnNhMG.js":3075,"./local/rJXbW1ZHmM.js":3985,"./local/yjRtkzy.js":3183};function a(e){return s(e).then(r)}function s(e){return Promise.resolve().then((()=>{if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}))}a.keys=()=>Object.keys(n),a.resolve=s,a.id=36,e.exports=a},5054:e=>{"use strict";e.exports=JSON.parse('{"revisions":{"local":["SJltHx2rW","SkhmnNhMG","rJXbW1ZHmM","yjRtkzy","20211228050445_support_event_pages","20220102035029_add_showengineicons","20220102051642_add_search_engines","20220114113759_add_opencurrentdoc","20221220055629_add_theme_support","20230201232239_remove_search_engines","20230703074609_remove_gigablast","20230704125533_remove_opencurrentdocaction","20230713165504_add_perma.cc","20230715152710_add_ghostarchive"],"sync":[]}}')}},n={};function a(e){var t=n[e];if(void 0!==t)return t.exports;var s=n[e]={exports:{}};return r[e].call(s.exports,s,s.exports,a),s.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var s=Object.create(null);a.r(s);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&n&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>i[e]=()=>r[e]));return i.default=()=>r,a.d(s,i),s},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";a(4573),a(5601);var e=a(651),t=a(1075);class r extends Error{constructor(e){super(e),this.name="TimeoutError"}}class n extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const s=e=>void 0===globalThis.DOMException?new n(e):new DOMException(e),i=e=>{const t=void 0===e.reason?s("This operation was aborted."):e.reason;return t instanceof Error?t:s(t)};var o,c=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class u{constructor(){o.set(this,[])}enqueue(e,t){const r={priority:(t={priority:0,...t}).priority,run:e};if(this.size&&c(this,o,"f")[this.size-1].priority>=t.priority)return void c(this,o,"f").push(r);const n=function(e,t,r){let n=0,a=e.length;for(;a>0;){const r=Math.trunc(a/2);let i=n+r;s=e[i],t.priority-s.priority<=0?(n=++i,a-=r+1):a=r}var s;return n}(c(this,o,"f"),r);c(this,o,"f").splice(n,0,r)}dequeue(){const e=c(this,o,"f").shift();return null==e?void 0:e.run}filter(e){return c(this,o,"f").filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return c(this,o,"f").length}}o=new WeakMap;var l,g,d,f,m,p,h,v,y,b,w,A,x,T,I,k,_,E,O,C,S,P,j,M,R,L,D=function(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},q=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class W extends Error{}class $ extends t{constructor(e){var t,r,n,a;if(super(),l.add(this),g.set(this,void 0),d.set(this,void 0),f.set(this,0),m.set(this,void 0),p.set(this,void 0),h.set(this,0),v.set(this,void 0),y.set(this,void 0),b.set(this,void 0),w.set(this,void 0),A.set(this,0),x.set(this,void 0),T.set(this,void 0),I.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"==typeof(e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:u,...e}).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(r=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==r?r:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(a=null===(n=e.interval)||void 0===n?void 0:n.toString())&&void 0!==a?a:""}\` (${typeof e.interval})`);D(this,g,e.carryoverConcurrencyCount,"f"),D(this,d,e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,"f"),D(this,m,e.intervalCap,"f"),D(this,p,e.interval,"f"),D(this,b,new e.queueClass,"f"),D(this,w,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,D(this,I,!0===e.throwOnTimeout,"f"),D(this,T,!1===e.autoStart,"f")}get concurrency(){return q(this,x,"f")}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);D(this,x,e,"f"),q(this,l,"m",M).call(this)}async add(e,t={}){return t={timeout:this.timeout,throwOnTimeout:q(this,I,"f"),...t},new Promise(((n,a)=>{q(this,b,"f").enqueue((async()=>{var s,o,c;D(this,A,(o=q(this,A,"f"),++o),"f"),D(this,f,(c=q(this,f,"f"),++c),"f");try{if(null===(s=t.signal)||void 0===s?void 0:s.aborted)throw new W("The task was aborted.");let a=e({signal:t.signal});t.timeout&&(a=function(e,t,n,a){let s;const o=new Promise(((o,c)=>{if("number"!=typeof t||1!==Math.sign(t))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t!==Number.POSITIVE_INFINITY){if((a={customTimers:{setTimeout,clearTimeout},...a}).signal){const{signal:e}=a;e.aborted&&c(i(e)),e.addEventListener("abort",(()=>{c(i(e))}))}s=a.customTimers.setTimeout.call(void 0,(()=>{const a=n instanceof Error?n:new r(`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),c(a)}),t),(async()=>{try{o(await e)}catch(e){c(e)}finally{a.customTimers.clearTimeout.call(void 0,s)}})()}else o(e)}));return o.clear=()=>{clearTimeout(s),s=void 0},o}(Promise.resolve(a),t.timeout)),t.signal&&(a=Promise.race([a,q(this,l,"m",R).call(this,t.signal)]));const o=await a;n(o),this.emit("completed",o)}catch(e){if(e instanceof r&&!t.throwOnTimeout)return void n();a(e),this.emit("error",e)}finally{q(this,l,"m",E).call(this)}}),t),this.emit("add"),q(this,l,"m",S).call(this)}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return q(this,T,"f")?(D(this,T,!1,"f"),q(this,l,"m",M).call(this),this):this}pause(){D(this,T,!0,"f")}clear(){D(this,b,new(q(this,w,"f")),"f")}async onEmpty(){0!==q(this,b,"f").size&&await q(this,l,"m",L).call(this,"empty")}async onSizeLessThan(e){q(this,b,"f").size<e||await q(this,l,"m",L).call(this,"next",(()=>q(this,b,"f").size<e))}async onIdle(){0===q(this,A,"f")&&0===q(this,b,"f").size||await q(this,l,"m",L).call(this,"idle")}get size(){return q(this,b,"f").size}sizeBy(e){return q(this,b,"f").filter(e).length}get pending(){return q(this,A,"f")}get isPaused(){return q(this,T,"f")}}g=new WeakMap,d=new WeakMap,f=new WeakMap,m=new WeakMap,p=new WeakMap,h=new WeakMap,v=new WeakMap,y=new WeakMap,b=new WeakMap,w=new WeakMap,A=new WeakMap,x=new WeakMap,T=new WeakMap,I=new WeakMap,l=new WeakSet,k=function(){return q(this,d,"f")||q(this,f,"f")<q(this,m,"f")},_=function(){return q(this,A,"f")<q(this,x,"f")},E=function(){var e;D(this,A,(e=q(this,A,"f"),--e),"f"),q(this,l,"m",S).call(this),this.emit("next")},O=function(){q(this,l,"m",j).call(this),q(this,l,"m",P).call(this),D(this,y,void 0,"f")},C=function(){const e=Date.now();if(void 0===q(this,v,"f")){const t=q(this,h,"f")-e;if(!(t<0))return void 0===q(this,y,"f")&&D(this,y,setTimeout((()=>{q(this,l,"m",O).call(this)}),t),"f"),!0;D(this,f,q(this,g,"f")?q(this,A,"f"):0,"f")}return!1},S=function(){if(0===q(this,b,"f").size)return q(this,v,"f")&&clearInterval(q(this,v,"f")),D(this,v,void 0,"f"),this.emit("empty"),0===q(this,A,"f")&&this.emit("idle"),!1;if(!q(this,T,"f")){const e=!q(this,l,"a",C);if(q(this,l,"a",k)&&q(this,l,"a",_)){const t=q(this,b,"f").dequeue();return!!t&&(this.emit("active"),t(),e&&q(this,l,"m",P).call(this),!0)}}return!1},P=function(){q(this,d,"f")||void 0!==q(this,v,"f")||(D(this,v,setInterval((()=>{q(this,l,"m",j).call(this)}),q(this,p,"f")),"f"),D(this,h,Date.now()+q(this,p,"f"),"f"))},j=function(){0===q(this,f,"f")&&0===q(this,A,"f")&&q(this,v,"f")&&(clearInterval(q(this,v,"f")),D(this,v,void 0,"f")),D(this,f,q(this,g,"f")?q(this,A,"f"):0,"f"),q(this,l,"m",M).call(this)},M=function(){for(;q(this,l,"m",S).call(this););},R=async function(e){return new Promise(((t,r)=>{e.addEventListener("abort",(()=>{r(new W("The task was aborted."))}),{once:!0})}))},L=async function(e,t){return new Promise((r=>{const n=()=>{t&&!t()||(this.off(e,n),r())};this.on(e,n)}))};const U=function(e,t,r){var n=null==e?0:e.length;return n?function(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(a);++n<a;)s[n]=e[n+t];return s}(e,t=null==t?0:t,r=void 0===r?n:r):[]},N=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},F=function(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1};var V=Math.max;const z=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=null==r?0:r;return a<0&&(a=V(n+a,0)),F(e,t,a)};a(8487);var B=a(5221),Q=a(3145);const Z={};async function H({area:e="local"}={}){if(Z[e])return!0;{const{storageVersion:t}=await Q.storage[e].get("storageVersion");if(t&&t===B.n_[e])return Z[e]=!0,!0}return!1}async function G({area:e="local"}={}){if(!Z[e])return new Promise(((t,r)=>{let n;const a=async function(){await H({area:e})?(window.clearTimeout(s),t()):n?r(new Error(`Storage (${e}) is not ready`)):window.setTimeout(a,30)},s=window.setTimeout((function(){n=!0}),6e4);a()}))}const K={get:async function(e=null,{area:t="local"}={}){return await G({area:t}),Q.storage[t].get(e)},set:async function(e,{area:t="local"}={}){return await G({area:t}),Q.storage[t].set(e)},remove:async function(e,{area:t="local"}={}){return await G({area:t}),Q.storage[t].remove(e)},clear:async function({area:e="local"}={}){return await G({area:e}),Q.storage[e].clear()}};var J=a(3145);var X=a(2667);const Y=Array.isArray,ee=function(){if(!arguments.length)return[];var e=arguments[0];return Y(e)?e:[e]},te=function(e,t){return!(null==e||!e.length)&&F(e,t,0)>-1},re=function(e,t,r){for(var n=-1,a=null==e?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1},ne=function(e,t){return!(null==e||!e.length)&&F(e,t,0)>-1},ae=function(e,t,r,n){var a,s=-1,i=te,o=!0,c=e.length,u=[],l=t.length;if(!c)return u;r&&(t=function(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}(t,(a=r,function(e){return a(e)}))),n?(i=re,o=!1):t.length>=200&&(i=ne,o=!1,t=new ee(t));e:for(;++s<c;){var g=e[s],d=null==r?g:r(g);if(g=n||0!==g?g:0,o&&d==d){for(var f=l;f--;)if(t[f]===d)continue e;u.push(g)}else i(t,d,n)||u.push(g)}return u},se=function(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e},ie="object"==typeof global&&global&&global.Object===Object&&global;var oe="object"==typeof self&&self&&self.Object===Object&&self,ce=(ie||oe||Function("return this")()).Symbol;var ue=ce?ce.isConcatSpreadable:void 0;const le=function(e){return Y(e)||!!(ue&&e&&e[ue])},ge=function e(t,r,n,a,s){var i=-1,o=t.length;for(n||(n=le),s||(s=[]);++i<o;){var c=t[i];r>0&&n(c)?r>1?e(c,r-1,n,a,s):se(s,c):a||(s[s.length]=c)}return s},de=function(e){return e};var fe=Math.max;var me=Object.prototype.toString;const pe=function(e){if(!function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}(e))return!1;var t=function(e){return me.call(e)}(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},he=function(e){return function(e){return null!=e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!pe(e)}(e)};var ve,ye=function(e,t,r){return t=fe(void 0===t?e.length-1:t,0),function(){for(var n=arguments,a=-1,s=fe(n.length-t,0),i=Array(s);++a<s;)i[a]=n[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=n[a];return o[t]=r(i),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,o)}}((function(e,t){return he(e)?ae(e,ge(t,1,he,!0)):[]}),ve,de);const be=ye;var we=a(3145);const Ae=["engines","disabledEngines","showInContextMenu","searchAllEnginesContextMenu","searchAllEnginesAction","showPageAction","tabInBackgound","searchModeAction","searchModeContextMenu","showEngineIcons","openCurrentDocContextMenu","appTheme","showContribPage","pinActionToolbarOpenCurrentDoc","pinActionToolbarOptions","pinActionToolbarContribute"],xe={archiveOrg:{target:"https://web.archive.org/web/{url}"},archiveOrgAll:{target:"https://web.archive.org/web/*/{url}"},google:{target:"https://webcache.googleusercontent.com/search?q=cache:{url}"},googleText:{target:"https://webcache.googleusercontent.com/search?strip=1&q=cache:{url}"},bing:{target:"https://www.bing.com/search?q=url:{url}&go=Search&qs=bs&form=QBRE",isExec:!0},yandex:{target:"https://www.yandex.com/",isExec:!0},archiveIs:{target:"https://archive.is/newest/{url}"},archiveIsAll:{target:"https://archive.is/{url}"},memento:{target:"http://timetravel.mementoweb.org/memento/{date}/{url}"},megalodon:{target:"https://megalodon.jp/?url={url}",isExec:!0},yahoo:{target:"https://search.yahoo.com/search?p=url:{url}",isExec:!0},permacc:{target:we.runtime.getURL("/src/search/index.html")+"?id={id}",isTaskId:!0},ghostarchive:{target:"https://ghostarchive.org/search?term={url}",isExec:!0}},Te={googleText:"google",archiveOrgAll:"archiveOrg",archiveIsAll:"archiveIs"},Ie={archiveOrg:["dark"],archiveIs:["dark"],yahoo:["dark"]},ke=["ghostarchive"],_e=[400,403,404,408,410,429,451,500,502,503,504,444,450,509,530,598,520,521,522,523,524,525,526,527],Ee={archiveOrg:["web.archive.org"],archiveIs:["archive.is","archive.today","archive.ph","archive.vn","archive.fo","archive.li","archive.md","archiveiya74codqgiixo33q62qlrqtkgmcitqx5u2oeqnmn5bpcbiyd.onion"],google:["webcache.googleusercontent.com"],bing:["cc.bingj.com"],yandex:["yandexwebcache.net"],permacc:["perma.cc","rejouer.perma.cc"],ghostarchive:["ghostarchive.org"]},Oe={archiveOrg:["web.archive.org"],archiveIs:["archive.is","archive.today","archive.ph","archive.vn","archive.fo","archive.li","archive.md","archiveiya74codqgiixo33q62qlrqtkgmcitqx5u2oeqnmn5bpcbiyd.onion"],google:["webcache.googleusercontent.com"],permacc:["rejouer.perma.cc"],ghostarchive:["ghostarchive.org"]},Ce={archiveOrg:/^https?:\/\/web\.archive\.org\/web\/[0-9]+\/(.*)/i,archiveIs:/^https?:\/\/(?:archive\.(?:is|today|ph|vn|fo|li|md)|archiveiya74codqgiixo33q62qlrqtkgmcitqx5u2oeqnmn5bpcbiyd.onion)\/o\/.*?\/(.*)/i,google:/^https?:\/\/webcache\.googleusercontent\.com\/search.*[?&]q=cache:.*$/i,permacc:/^https:\/\/rejouer\.perma\.cc\/(?:.*)\/mp_\/(.*)/i,ghostarchive:/^https:\/\/ghostarchive\.org\/(?:.*)\/mp_\/(.*)/i},Se="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36",Pe="Mozilla/5.0 (Linux; Android 13; Pixel 7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Mobile Safari/537.36";var je=a(3145);async function Me(e){return void 0===e&&(e=await K.get(["engines","disabledEngines"])),be(e.engines,e.disabledEngines)}async function Re({message:e,messageId:t,title:r,type:n="info",timeout:a=0}={}){if(r||(r=(0,X.Q)("extensionName")),t&&(e=(0,X.Q)(t)),"safari"===B.W9)return je.runtime.sendNativeMessage("application.id",{id:"notification",message:e});{const t=await je.notifications.create(`wa-notification-${n}`,{type:"basic",title:r,message:e,iconUrl:"/src/assets/icons/app/icon-64.png"});return a&&window.setTimeout((()=>{je.notifications.clear(t)}),a),t}}function Le(e){try{if(e.length>2048)return;const t=new URL(e);if(/^(?:https?|ftp):$/i.test(t.protocol))return!0}catch(e){}}async function De({url:e="",setOpenerTab:t=!0,getTab:r=!1,activeTab:n=null}={}){n||(n=await(0,X.fr)());const a={url:e,index:n.index+1,active:!0,getTab:r};return t&&(a.openerTabId=await async function(e){return(0,X._9)(e)&&!(await(0,X.Xf)()).isMobile?e.id:null}(n)),(0,X.ZW)(a)}let qe,We=0;async function $e({action:e="auto",activeTab:t=null}={}){return await async function({valueChange:e=1,maxUseCount:t=1/0,minInterval:r=0}={}){if(Date.now()-We>=r){We=Date.now();const{useCount:r}=await K.get("useCount");r<t?await K.set({useCount:r+e}):r>t&&await K.set({useCount:t})}}({valueChange:1,maxUseCount:1e3}),async function({minUseCount:e=0,minInstallDays:t=0,minLastOpenDays:r=0,minLastAutoOpenDays:n=0,action:a="auto",activeTab:s=null}={}){if(B.pL){const i=await K.get(["showContribPage","useCount","installTime","contribPageLastOpen","contribPageLastAutoOpen"]),o=(0,X.Og)();if(i.showContribPage&&i.useCount>=e&&o-i.installTime>=864e5*t&&o-i.contribPageLastOpen>=864e5*r&&o-i.contribPageLastAutoOpen>=864e5*n)return await K.set({contribPageLastOpen:o,contribPageLastAutoOpen:o}),async function({action:e="",updateStats:t=!0,getTab:r=!1,activeTab:n=null}={}){t&&await K.set({contribPageLastOpen:(0,X.Og)()});let a=je.runtime.getURL("/src/contribute/index.html");return e&&(a=`${a}?action=${e}`),De({url:a,getTab:r,activeTab:n})}({action:a,updateStats:!1,activeTab:s,getTab:!0})}}({minUseCount:10,minInstallDays:14,minLastOpenDays:14,minLastAutoOpenDays:365,activeTab:t,action:e})}async function Ue({activeTab:e=!1}={}){const t=[];if(e){const e=await(0,X.fr)();e&&t.push(e)}else t.push(...await je.tabs.query({url:["http://*/*","https://*/*"],windowType:"normal"}));for(const e of t)je.tabs.executeScript(e.id,{allFrames:!0,runAt:"document_start",file:"/src/base/script.js"})}function Ne(e,{variant:t=""}={}){let r=e=Te[e]||e;return t&&Ie[e]?.includes(t)&&(r+=`-${t}`),ke.includes(e)?{16:`src/assets/icons/engines/${r}-16.png`,32:`src/assets/icons/engines/${r}-32.png`}:{16:`src/assets/icons/engines/${r}.svg`}}function Fe(e){return new Promise(((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)}))}function Ve(){return qe||(qe=function(e,t){const r=indexedDB.open("keyval-store");r.onupgradeneeded=()=>r.result.createObjectStore(t);const n=Fe(r);return(e,r)=>n.then((n=>r(n.transaction(t,e).objectStore(t))))}(0,"keyval")),qe}var ze=a(3145);const Be=new $({concurrency:1}),Qe=new $({concurrency:1}),Ze={};function He(e){return{metadataKey:`metadata_${e}`,dataKey:`data_${e}`}}async function Ge({storageId:e,metadata:t=!1,data:r=!1,area:n="local"}={}){const{metadataKey:a,dataKey:s}=He(e);return t&&({[a]:{value:t}={}}=await K.get(a)),r&&("local"===n?({[s]:{value:r}={}}=await K.get(s)):"indexeddb"===n?({value:r}=await function(e,t=Ve()){return t("readonly",(t=>Fe(t.get(e))))}(s)):"memory"===n&&({value:r}=Ze[s])),{metadata:t,data:r}}async function Ke({storageId:e,metadata:t=null,data:r=null,area:n="local"}={}){const{metadataKey:a,dataKey:s}=He(e);null!==t&&await K.set({[a]:{value:t}}),null!==r&&("local"===n?await K.set({[s]:{value:r}}):"indexeddb"===n?await function(e,t,r=Ve()){return r("readwrite",(r=>(r.put(t,e),Fe(r.transaction))))}(s,{value:r}):"memory"===n&&(Ze[s]={value:r}))}async function Je({storageId:e,metadata:t=!1,data:r=!1,area:n="local"}={}){const{metadataKey:a,dataKey:s}=He(e);t&&await K.remove(a),r&&("local"===n?await K.remove(s):"indexeddb"===n?await function(e,t=Ve()){return t("readwrite",(t=>(t.delete(e),Fe(t.transaction))))}(s):"memory"===n&&delete Ze[s])}async function Xe(t,{token:r="",receipts:n=null,expiryTime:a=0,area:s="local",isTask:i=!1}={}){"indexeddb"!==s||["safari"].includes(B.W9)||(s="memory");const o=r||(0,e.Z)(),c=Date.now(),u={area:s,addTime:c,receipts:n,alarms:[],isTask:i};if(a){const e=`delete-storage-item_${o}`;ze.alarms.create(e,{delayInMinutes:a}),u.alarms.push(e)}return await async function({storageId:e,addTime:t}={}){await Qe.add((async function(){const{storageRegistry:r}=await K.get("storageRegistry");r[e]={addTime:t},await K.set({storageRegistry:r})}))}({storageId:o,addTime:c}),await Ke({storageId:o,metadata:u,data:t,area:s}),o}async function Ye({storageId:e,registry:t=!0}={}){const{metadata:r}=await Ge({storageId:e,metadata:!0});if(r){await Je({storageId:e,data:!0,area:r.area});for(const e of r.alarms)await ze.alarms.clear(e);await Je({storageId:e,metadata:!0}),t&&(r.isTask&&await async function({taskId:e}={}){await Qe.add((async function(){const{taskRegistry:t}=await K.get("taskRegistry"),r=t.tasks[e];if(r){const n=t.tabs[r.tabId];n&&n.taskId===e&&delete t.tabs[r.tabId]}delete t.tasks[e],await K.set({taskRegistry:t})}))}({taskId:e}),await async function({storageId:e}={}){await Qe.add((async function(){const{storageRegistry:t}=await K.get("storageRegistry");delete t[e],await K.set({storageRegistry:t})}))}({storageId:e}))}}async function et({storageId:e}={}){await Be.add((async function(){const{metadata:t}=await Ge({storageId:e,metadata:!0});t&&t.receipts&&(t.receipts.received+=1,t.receipts.received<t.receipts.expected?await Ke({storageId:e,metadata:t}):await Ye({storageId:e}))}))}const tt={addStorageItem:Xe,getStorageItem:async function({storageId:e,saveReceipt:t=!1}={}){const{metadata:r}=await Ge({storageId:e,metadata:!0});if(r){const{data:n}=await Ge({storageId:e,data:!0,area:r.area});if(n)return t&&await et({storageId:e}),n}},deleteStorageItem:Ye,saveStorageItemReceipt:et,addTaskRegistryItem:async function({taskId:e,tabId:t}={}){await Qe.add((async function(){const{taskRegistry:r}=await K.get("taskRegistry"),n=Date.now();r.lastTaskStart=n,r.tabs[t]={taskId:e},r.tasks[e]={tabId:t,addTime:n},await K.set({taskRegistry:r})}))},getTaskRegistryItem:async function({taskId:e,tabId:t}={}){const{taskRegistry:r}=await K.get("taskRegistry");if(t){const e=r.tabs[t];if(e)return{taskId:e.taskId,...r.tasks[e.taskId]}}else if(e){const t=r.tasks[e];if(t)return{taskId:e,...t}}},cleanupRegistry:async function(){await Qe.add((async function(){const{lastStorageCleanup:e}=await K.get("lastStorageCleanup");if(Date.now()-e>864e5){const{taskRegistry:e}=await K.get("taskRegistry");for(const[t,r]of Object.entries(e.tasks))if(Date.now()-r.addTime>36e5){const n=e.tabs[r.tabId];n&&n.taskId===t&&delete e.tabs[r.tabId],delete e.tasks[t]}await K.set({taskRegistry:e});const{storageRegistry:t}=await K.get("storageRegistry");for(const[e,r]of Object.entries(t))Date.now()-r.addTime>36e5&&(await Ye({storageId:e,registry:!1}),delete t[e]);await K.set({storageRegistry:t,lastStorageCleanup:Date.now()})}}))},aquireLock:async function({name:t,expiryTime:r=1}={}){return t=await Be.add((async function(){t||(t=(0,e.Z)());const n=`lock_${t}`,{metadata:a}=await Ge({storageId:n,metadata:!0});if(!a)return await Xe("",{token:n,expiryTime:r}),t}))}};var rt=a(3145);const nt=new $({concurrency:1});function at(e,t){rt.webRequest.onBeforeSendHeaders.addListener((function(e){for(const r of e.requestHeaders)if("user-agent"===r.name.toLowerCase()){r.value=t;break}return{requestHeaders:e.requestHeaders}}),{urls:["http://*/*","https://*/*"],tabId:e},["blocking","requestHeaders"])}function st({id:e,title:t="",contexts:r,parent:n,type:a="normal",documentUrlPatterns:s,targetUrlPatterns:i,icons:o}){const c={id:e,title:t,contexts:r,parentId:n,type:a};s&&(c.documentUrlPatterns=s),i&&(c.targetUrlPatterns=i),o&&(c.icons=o),rt.contextMenus.create(c,X.nE)}async function it(){const e=await(0,X.Xf)({fallback:!1}),t=await K.get(Ae),r=await async function(e){return e||({appTheme:e}=await K.get("appTheme")),"auto"===e&&(e=(0,X.yt)().matches?"dark":"light"),e}(t.appTheme),n=["link"];"all"===t.showInContextMenu&&(n.push("audio","editable","frame","image","selection","video"),e.isFirefox&&n.push("password"),e.isAndroid||n.push("page"));const a=e.isFirefox&&t.showEngineIcons,s=!e.isSamsung&&t.searchAllEnginesContextMenu,i=await Me(t);if(1===i.length){const e=i[0];st({id:`search_${i[0]}_1`,title:(0,X.Q)("mainMenuItemTitle_engine",(0,X.Q)(`menuItemTitle_${e}`)),contexts:n})}else if(i.length>1&&"main"===s)st({id:"search_allEngines_1",title:(0,X.Q)("mainMenuItemTitle_allEngines"),contexts:n});else if(i.length>1){if(t.openCurrentDocContextMenu){const t=Object.values(Ee).map((e=>e.map((e=>`*://${e}/*`)))).flat(),r=Object.values(Oe).map((e=>e.map((e=>`*://${e}/*`)))).flat();st({id:"openCurrentDoc_1",title:(0,X.Q)("menuItemTitle_openCurrentDoc"),contexts:n,documentUrlPatterns:t,targetUrlPatterns:r}),e.isSamsung||st({id:"sep_1",contexts:n,type:"separator",documentUrlPatterns:t,targetUrlPatterns:r})}"sub"===s&&(st({id:"search_allEngines_1",title:(0,X.Q)("menuItemTitle_allEngines"),contexts:n,icons:a&&Ne("allEngines",{variant:r})}),e.isSamsung||st({id:"sep_2",contexts:n,type:"separator"})),i.forEach((function(e){st({id:`search_${e}_1`,title:(0,X.Q)(`menuItemTitle_${e}`),contexts:n,icons:a&&Ne(e,{variant:r})})}))}}async function ot(e){const t={sessionOrigin:"",sessionType:"search",searchMode:"",sourceTabId:-1,sourceTabIndex:-1,sourceFrameId:-1,engineGroup:"",engines:[],options:{}};if(t.options=await K.get(Ae),e.options&&(Object.assign(t.options,e.options),delete e.options),e.engine){if("allEngines"===e.engine){const e=await Me(t.options);t.engineGroup="allEngines",t.engines=e}else t.engines.push(e.engine);delete e.engine}return Object.assign(t,e),t.searchMode||(t.searchMode="action"===t.sessionOrigin?t.options.searchModeAction:t.options.searchModeContextMenu),t}async function ct(e,t){["chrome","opera"].includes(B.W9)&&async function(){if(/ opr\//i.test(navigator.userAgent)){const{lastEngineAccessCheck:e}=await K.get("lastEngineAccessCheck");if(Date.now()-e>6048e5){await K.set({lastEngineAccessCheck:Date.now()});const e="https://www.google.com/generate_204";await new Promise((t=>{let r=!1;function n(){return r=!0,a(),{cancel:!0}}const a=function(){window.clearTimeout(s),je.webRequest.onBeforeRequest.removeListener(n),t(r)},s=window.setTimeout(a,3e3);je.webRequest.onBeforeRequest.addListener(n,{urls:[e],types:["xmlhttprequest"]},["blocking"]),fetch(e).catch((e=>null))}))||await Re({messageId:"error_noSearchEngineAccess"})}}}(),Array.isArray(t)||(t=[t]);const r=await rt.tabs.get(e.sourceTabId);e.sourceTabIndex=r.index;let n=!0;for(const r of t)await ut(e,r,n),n=!1}async function ut(e,t,r=!0){if(!Le(t.docUrl))return void await Re({messageId:"error_invalidPageUrl"});let n,a=r;if(r){const t=await $e();t&&(n=t.id,e.sourceTabIndex=t.index,a=!1)}a=!e.options.tabInBackgound&&a;const s=await async function(e){const t=[];for(const r of e){const e=xe[r].isExec,n=xe[r].isTaskId;t.push({engine:r,isExec:e,isTaskId:n,sendsReceipt:e||n})}return t}(e.engines),i=s.filter((e=>e.sendsReceipt));let o;i.length&&(o=await tt.addStorageItem(t,{receipts:{expected:i.length,received:0},expiryTime:10,area:"indexeddb"}));for(const r of s)e.sourceTabIndex+=1,await lt(e,r,t,o,a),a=!1;await(0,X.Dt)()&&n&&await rt.tabs.update(n,{active:!0})}async function lt(t,r,n,a,s){let i;r.sendsReceipt&&(i=await tt.addStorageItem({session:t,search:r,docId:a},{receipts:{expected:1,received:0},expiryTime:10,isTask:!0}));const o=(0,e.Z)(),c=(await(0,X.ZW)({token:o,index:t.sourceTabIndex,active:s,getTab:!0})).id;r.sendsReceipt&&await tt.addTaskRegistryItem({taskId:i,tabId:c});const u=await async function(e,t,r,n){const a=t.engine;let s=xe[a].target;t.isTaskId&&(s=s.replace("{id}",n));let i=r.docUrl;if(["archiveOrg","archiveOrgAll"].includes(t.engine)&&(i=function(e){const t=new URL(e);return t.hash&&(t.hash=""),t.toString()}(i)),["archiveOrg","archiveOrgAll","archiveIs","archiveIsAll","memento"].includes(a)||(i=encodeURIComponent(i)),"memento"===a){const e=new Date;e.setUTCMinutes(e.getUTCMinutes()-1),s=s.replace("{date}",e.toISOString().split(".")[0].replace(/[-T:]/g,""))}return s=s.replace(/{url}/g,i),s}(0,r,n,i);await async function(t,r,n,a){let s;const i=await async function(e){if(await(0,X.Dt)()){if("firefox"===B.W9&&["google","googleText"].includes(e))return Pe;if(["yandex","bing","yahoo"].includes(e))return Se}}(a);if(i)if("samsung"===B.W9){function o(e){c(),at(e.tabId,i)}s=(0,e.Z)();const c=function(){window.clearTimeout(u),rt.webRequest.onBeforeRequest.removeListener(o)},u=window.setTimeout(c,1e4);rt.webRequest.onBeforeRequest.addListener(o,{urls:[(0,X.Yw)(s)],types:["main_frame"]},["blocking"])}else at(t,i);s&&await tt.addStorageItem({tabUrl:r,keepHistory:!1},{receipts:{expected:1,received:0},expiryTime:1,token:s}),await tt.addStorageItem({tabUrl:s?(0,X.Yw)(s):r,keepHistory:!1},{receipts:{expected:1,received:0},expiryTime:1,token:n}),"safari"===B.W9?rt.runtime.sendMessage({id:"setTabLocation",token:n}).catch((e=>null)):rt.tabs.sendMessage(t,{id:"setTabLocation",token:n},{frameId:0}).catch((e=>null))}(c,u,o,r.engine)}async function gt({linkUrl:e}={}){if(e){let t;for(const[r,n]of Object.entries(Ce)){const a=e.match(n);if(a){if("google"===r){const r=new URL(e).searchParams.get("q");r&&(t=r.replace(/^cache.*?(https?:\/\/.*)$/,"$1").trim())}else t=a[1].trim();break}}if(Le(t))return De({url:t});await Re({messageId:"error_currentDocUrlNotFound"})}else{const e=await(0,X.fr)();await async function({tabId:e,frameId:t=0,module:r,insert:n=!1}={}){try{const[a]=await je.tabs.executeScript(e,{frameId:t,runAt:"document_start",code:`typeof ${r}Module !== 'undefined'`});if(!a&&n&&await je.tabs.executeScript(e,{frameId:t,runAt:"document_start",file:`/src/${r}/script.js`}),a||n)return!0}catch(e){}return!1}({tabId:e.id,module:"tools",insert:!0})?await(0,X.Qr)("openCurrentDoc()",e.id):await Re({messageId:"error_scriptsNotAllowed"})}}async function dt(e,t){ct(e,{docUrl:t})}async function ft(e){"samsung"===B.W9&&(0,X._9)(e)&&(e=await rt.tabs.get(e.id));const t=await ot({sessionOrigin:"action",sourceTabId:e.id,sourceTabIndex:e.index});if("url"===t.searchMode)return void await Re({messageId:await(0,X.tq)()?"error_invalidSearchModeMobile_url":"error_invalidSearchMode_url"});const r=await Me(t.options);r.length?("main"===t.options.searchAllEnginesAction&&r.length>1?(t.engineGroup="allEngines",t.engines=r):t.engines.push(r[0]),dt(t,e.url)):await Re({messageId:"error_allEnginesDisabled"})}async function mt(){await rt.contextMenus.removeAll();const{showInContextMenu:e}=await K.get("showInContextMenu");"false"!==e&&(["chrome","edge","opera"].includes(B.W9)?await K.set({setContextMenuEvent:Date.now()}):await it())}async function pt(){const e=await K.get(["engines","disabledEngines","searchAllEnginesAction"]),t=await Me(e);return 1===t.length?(rt.browserAction.setTitle({title:(0,X.Q)("actionTitle_engine",(0,X.Q)(`engineName_${t[0]}`))}),void rt.browserAction.setPopup({popup:""})):"main"===e.searchAllEnginesAction&&t.length>1?(rt.browserAction.setTitle({title:(0,X.Q)("actionTitle_allEngines")}),void rt.browserAction.setPopup({popup:""})):(rt.browserAction.setTitle({title:(0,X.Q)("extensionName")}),void(0===t.length?rt.browserAction.setPopup({popup:""}):rt.browserAction.setPopup({popup:"/src/action/index.html"})))}async function ht(e){await async function(e){const t=await K.get(["engines","disabledEngines","searchAllEnginesAction"]),r=await Me(t),n=rt.pageAction.onClicked.hasListener(ft);return 1===r.length?(n||rt.pageAction.onClicked.addListener(ft),rt.pageAction.setTitle({tabId:e,title:(0,X.Q)("actionTitle_engine",(0,X.Q)(`engineName_${r[0]}`))}),void rt.pageAction.setPopup({tabId:e,popup:""})):"main"===t.searchAllEnginesAction&&r.length>1?(n||rt.pageAction.onClicked.addListener(ft),rt.pageAction.setTitle({tabId:e,title:(0,X.Q)("actionTitle_allEngines")}),void rt.pageAction.setPopup({tabId:e,popup:""})):(rt.pageAction.setTitle({tabId:e,title:(0,X.Q)("extensionName")}),void(0===r.length?(n||rt.pageAction.onClicked.addListener(ft),rt.pageAction.setPopup({tabId:e,popup:""})):(n&&rt.pageAction.onClicked.removeListener(ft),rt.pageAction.setPopup({tabId:e,popup:"/src/action/index.html"}))))}(e),await rt.pageAction.show(e)}async function vt(e){_e.includes(e.statusCode)&&await ht(e.tabId)}async function yt(e){await ht(e.tabId)}async function bt(){const{showPageAction:e}=await K.get("showPageAction"),t=rt.webRequest.onCompleted.hasListener(vt);if(e){if(!t){const e={types:["main_frame"],urls:["http://*/*","https://*/*"]};rt.webRequest.onCompleted.addListener(vt,e),rt.webRequest.onErrorOccurred.addListener(yt,e)}}else t&&(rt.webRequest.onCompleted.removeListener(vt),rt.webRequest.onErrorOccurred.removeListener(yt))}async function wt(){const e=[pt];await async function(){if(await(0,X.Dt)()){if("samsung"===B.W9)return!0}else if(je.contextMenus)return!0;return!1}()&&e.push(mt),"firefox"!==B.W9||await(0,X.Dt)()||e.push(bt),await nt.addAll(e)}rt.contextMenus&&rt.contextMenus.onClicked.addListener((async function(e,t){"samsung"===B.W9&&(0,X._9)(t)&&(t=await rt.tabs.get(t.id));const[r,n]=e.menuItemId.split("_");if("openCurrentDoc"===r)return void await gt({linkUrl:e.linkUrl});const a={sessionOrigin:"context",sessionType:r,sourceTabId:t.id,sourceTabIndex:t.index,sourceFrameId:void 0!==e.frameId?e.frameId:0};"search"===r&&(a.engine=n),ct(await ot(a),{docUrl:e.linkUrl||e.pageUrl})})),rt.browserAction.onClicked.addListener(ft),rt.runtime.onMessage.addListener((function(e,t,r){return function(e,t){return"safari"===B.W9?(e.then((function(e){void 0===e&&(e=null),t(e)})),!0):e}(async function(e,t){if(t.url!==document.URL)if("samsung"===B.W9&&(/^internet-extension:\/\/.*\/src\/action\/index.html/.test(t.tab?.url)&&(t.tab=null),(0,X._9)(t.tab)&&(t.tab=await rt.tabs.get(t.tab.id))),"actionPopupSubmit"===e.id&&async function(e,t){const r=await(0,X.fr)();dt(await ot({sessionOrigin:"action",sourceTabId:r.id,sourceTabIndex:r.index,engine:e}),t||r.url)}(e.engine,e.docUrl),"openCurrentDoc"===e.id)gt();else if("notification"===e.id)Re({message:e.message,messageId:e.messageId,title:e.title,type:e.type});else{if("getPlatform"===e.id)return(0,X.Xf)({fallback:!1});if("storageRequest"===e.id){const r=await tt.getStorageItem({storageId:e.storageId,saveReceipt:e.saveReceipt});if(r){if(e.asyncResponse)return Promise.resolve(r);rt.tabs.sendMessage(t.tab.id,{id:"storageResponse",storageItem:r},{frameId:t.frameId})}}else if("storageReceipt"===e.id)for(const t of e.storageIds)await tt.saveStorageItemReceipt({storageId:t});else if("taskRequest"===e.id){const e=await tt.getTaskRegistryItem({tabId:t.tab.id});if(e&&Date.now()-e.addTime<6e5){const r=await tt.getStorageItem({storageId:e.taskId});r&&r.search.isExec&&async function(e,t,r){await(0,X.Qr)(`var taskId = '${r}';`,e),await(0,X.F$)("/src/commons-engine/script.js",e),await(0,X.F$)(`/src/engines/${t}/script.js`,e)}(t.tab.id,r.search.engine,e.taskId)}}else"optionChange"===e.id?await async function(){await wt()}():"showPage"===e.id&&await De({url:e.url})}}(e,t),r)})),rt.storage.onChanged.addListener((async function(e,t){"local"===t&&await H()&&e.setContextMenuEvent&&await nt.add(it)})),rt.alarms.onAlarm.addListener((async function({name:e}){if(e.startsWith("delete-storage-item")){const[t,r]=e.split("_");await tt.deleteStorageItem({storageId:r})}})),rt.runtime.onInstalled.addListener((async function(e){["install","update"].includes(e.reason)&&["chrome","edge","opera","samsung"].includes(B.W9)&&await Ue()})),rt.runtime.onStartup.addListener((async function(){["samsung"].includes(B.W9)&&await Ue({activeTab:!0})})),async function(){await H()||(await async function(){if(await async function({area:e="local"}={}){try{return await Q.storage[e].get(""),!0}catch(e){return!1}}({area:"sync"})){const{storageVersion:e}=await J.storage.sync.get("storageVersion");if(e&&e.length<14){const{storageVersion:e}=await J.storage.local.get("storageVersion");if(!e||e.length<14){const e=await J.storage.sync.get(null);await J.storage.local.clear(),await J.storage.local.set(e),await J.storage.sync.clear()}}}}(),await async function({area:e="local"}={}){return async function(e,{area:t="local"}={}){return async function(e,{area:t="local"}={}){const r=await e.getAvailableRevisions({area:t}),n=await e.getCurrentRevision({area:t}),a=N(r);if(n===a)return;const s=U(r,z(r,n)+1,z(r,a)+1);console.log(`Migrating storage (${t}): ${n} => ${a}`);for(const r of s){const n=await e.getRevision({area:t,revision:r});console.log(`Applying revision (${t}): ${n.revision} - ${n.message}`),await n.upgrade()}}(e,{area:t})}({getAvailableRevisions:async({area:e}={})=>(await Promise.resolve().then(a.t.bind(a,5054,19))).revisions[e],getCurrentRevision:async({area:e}={})=>(await J.storage[e].get("storageVersion")).storageVersion,getRevision:async({area:e,revision:t}={})=>a(36)(`./${e}/${t}.js`)},{area:e})}()),await wt(),await tt.cleanupRegistry()}()})()})();